(function(e){typeof define=="function"&&define.amd?define(["jquery","moment"],e):e(jQuery,moment)})(function(e,t){function r(e,t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function i(e,t){var n=t.longDateFormat("L");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?n+=" ddd":n="ddd "+n,n}function f(e){l(n,e)}function l(t){function n(n,r){e.isPlainObject(r)&&e.isPlainObject(t[n])&&!c(n)?t[n]=l({},t[n],r):r!==undefined&&(t[n]=r)}for(var r=1;r<arguments.length;r++)e.each(arguments[r],n);return t}function c(e){return/(Time|Duration)$/.test(e)}function h(r,i){function d(e){var n=t.localeData||t.langData;return n.call(t,e)||n.call(t,"en")}function M(e){x?H()&&(I(),j(e)):_()}function _(){T=c.theme?"ui":"fc",r.addClass("fc"),c.isRTL?r.addClass("fc-rtl"):r.addClass("fc-ltr"),c.theme?r.addClass("ui-widget"):r.addClass("fc-unthemed"),x=e("<div class='fc-view-container'/>").prependTo(r),E=new p(f,c),S=E.render(),S&&r.prepend(S),B(c.defaultView),c.handleWindowResize&&(k=R(z,c.windowResizeDelay),e(window).resize(k))}function D(){N&&N.destroy(),E.destroy(),x.remove(),r.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),e(window).unbind("resize",k)}function H(){return r.is(":visible")}function B(e){j(0,e)}function j(t,n){L++,N&&n&&N.name!==n&&(E.deactivateButton(N.name),ht(),N.start&&N.destroy(),N.el.remove(),N=null),!N&&n&&(N=new a[n](f),N.el=e("<div class='fc-view fc-"+n+"-view' />").appendTo(x),E.activateButton(n)),N&&(t&&(A=N.incrementDate(A,t)),(!N.start||t||!A.isWithin(N.intervalStart,N.intervalEnd))&&H()&&(ht(),N.start&&N.destroy(),N.render(A),pt(),Z(),et(),$())),pt(),L--}function F(e){if(H())return e&&U(),L++,N.updateSize(!0),L--,!0}function I(){H()&&U()}function U(){typeof c.contentHeight=="number"?C=c.contentHeight:typeof c.height=="number"?C=c.height-(S?S.outerHeight(!0):0):C=Math.round(x.width()/Math.max(c.aspectRatio,.5))}function z(e){!L&&e.target===window&&N.start&&F(!0)&&N.trigger("windowResize",w)}function W(){V(),K()}function X(){H()&&(ht(),N.destroyEvents(),N.renderEvents(O),pt())}function V(){ht(),N.destroyEvents(),pt()}function $(){!c.lazyFetching||y(N.start,N.end)?K():X()}function K(){b(N.start,N.end)}function Q(e){O=e,X()}function G(){X()}function Z(){E.updateTitle(N.title)}function et(){var e=f.getNow();e.isWithin(N.intervalStart,N.intervalEnd)?E.disableButton("today"):E.enableButton("today")}function tt(e,t){e=f.moment(e),t?t=f.moment(t):e.hasTime()?t=e.clone().add(f.defaultTimedEventDuration):t=e.clone().add(f.defaultAllDayEventDuration),N.select(e,t)}function nt(){N&&N.unselect()}function rt(){j(-1)}function it(){j(1)}function st(){A.add(-1,"years"),j()}function ot(){A.add(1,"years"),j()}function ut(){A=f.getNow(),j()}function at(e){A=f.moment(e),j()}function ft(e){A.add(t.duration(e)),j()}function lt(e,t){var n,r;if(!t||a[t]===undefined)t=t||"day",n=E.getViewsWithButtons().join(" "),r=n.match(new RegExp("\\w+"+q(t))),r||(r=n.match(/\w+Day/)),t=r?r[0]:"agendaDay";A=e,B(t)}function ct(){return A.clone()}function ht(){x.css({width:"100%",height:x.height(),overflow:"hidden"})}function pt(){x.css({width:"",height:"",overflow:""})}function dt(){return f}function vt(){return N}function mt(e,t){if(t===undefined)return c[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio")c[e]=t,F(!0)}function gt(e,t){if(c[e])return c[e].apply(t||w,Array.prototype.slice.call(arguments,2))}var f=this;i=i||{};var c=l({},n,i),h;c.lang in s?h=s[c.lang]:h=s[n.lang],h&&(c=l({},n,h,i)),c.isRTL&&(c=l({},n,o,h||{},i)),f.options=c,f.render=M,f.destroy=D,f.refetchEvents=W,f.reportEvents=Q,f.reportEventChange=G,f.rerenderEvents=X,f.changeView=B,f.select=tt,f.unselect=nt,f.prev=rt,f.next=it,f.prevYear=st,f.nextYear=ot,f.today=ut,f.gotoDate=at,f.incrementDate=ft,f.zoomTo=lt,f.getDate=ct,f.getCalendar=dt,f.getView=vt,f.option=mt,f.trigger=gt;var v=P(d(c.lang));c.monthNames&&(v._months=c.monthNames),c.monthNamesShort&&(v._monthsShort=c.monthNamesShort),c.dayNames&&(v._weekdays=c.dayNames),c.dayNamesShort&&(v._weekdaysShort=c.dayNamesShort);if(c.firstDay!=null){var g=P(v._week);g.dow=c.firstDay,v._week=g}f.defaultAllDayEventDuration=t.duration(c.defaultAllDayEventDuration),f.defaultTimedEventDuration=t.duration(c.defaultTimedEventDuration),f.moment=function(){var e;return c.timezone==="local"?(e=u.moment.apply(null,arguments),e.hasTime()&&e.local()):c.timezone==="UTC"?e=u.moment.utc.apply(null,arguments):e=u.moment.parseZone.apply(null,arguments),"_locale"in e?e._locale=v:e._lang=v,e},f.getIsAmbigTimezone=function(){return c.timezone!=="local"&&c.timezone!=="UTC"},f.rezoneDate=function(e){return f.moment(e.toArray())},f.getNow=function(){var e=c.now;return typeof e=="function"&&(e=e()),f.moment(e)},f.calculateWeekNumber=function(e){var t=c.weekNumberCalculation;if(typeof t=="function")return t(e);if(t==="local")return e.week();if(t.toUpperCase()==="ISO")return e.isoWeek()},f.getEventEnd=function(e){return e.end?e.end.clone():f.getDefaultEventEnd(e.allDay,e.start)},f.getDefaultEventEnd=function(e,t){var n=t.clone();return e?n.stripTime().add(f.defaultAllDayEventDuration):n.add(f.defaultTimedEventDuration),f.getIsAmbigTimezone()&&n.stripZone(),n},f.formatRange=function(e,t,n){return typeof n=="function"&&(n=n.call(f,c,v)),Y(e,t,n,null,c.isRTL)},f.formatDate=function(e,t){return typeof t=="function"&&(t=t.call(f,c,v)),J(e,t)},m.call(f,c);var y=f.isFetchNeeded,b=f.fetchEvents,w=r[0],E,S,x,T,N,C,k,L=0,A,O=[];c.defaultDate!=null?A=f.moment(c.defaultDate):A=f.getNow(),f.getSuggestedViewHeight=function(){return C===undefined&&I(),C},f.isHeightAuto=function(){return c.contentHeight==="auto"||c.height==="auto"}}function p(t,n){function u(){var t=n.header;o=n.theme?"ui":"fc";if(t)return i=e("<div class='fc-toolbar'/>").append(l("left")).append(l("right")).append(l("center")).append('<div class="fc-clear"/>'),i}function f(){i.remove()}function l(r){var i=e('<div class="fc-'+r+'"/>'),u=n.header[r];return u&&e.each(u.split(" "),function(r){var u=e(),f=!0,l;e.each(this.split(","),function(r,i){var l,c,h,p,d,v,m,g;i=="title"?(u=u.add(e("<h2>&nbsp;</h2>")),f=!1):(t[i]?l=function(){t[i]()}:a[i]&&(l=function(){t.changeView(i)},s.push(i)),l&&(c=A(n.themeButtonIcons,i),h=A(n.buttonIcons,i),p=A(n.defaultButtonText,i),d=A(n.buttonText,i),d?v=F(d):c&&n.theme?v="<span class='ui-icon ui-icon-"+c+"'></span>":h&&!n.theme?v="<span class='fc-icon fc-icon-"+h+"'></span>":v=F(p||i),m=["fc-"+i+"-button",o+"-button",o+"-state-default"],g=e('<button type="button" class="'+m.join(" ")+'">'+v+"</button>").click(function(){g.hasClass(o+"-state-disabled")||(l(),(g.hasClass(o+"-state-active")||g.hasClass(o+"-state-disabled"))&&g.removeClass(o+"-state-hover"))}).mousedown(function(){g.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){g.removeClass(o+"-state-down")}).hover(function(){g.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){g.removeClass(o+"-state-hover").removeClass(o+"-state-down")}),u=u.add(g)))}),f&&u.first().addClass(o+"-corner-left").end().last().addClass(o+"-corner-right").end(),u.length>1?(l=e("<div/>"),f&&l.addClass("fc-button-group"),l.append(u),i.append(l)):i.append(u)}),i}function c(e){i.find("h2").text(e)}function h(e){i.find(".fc-"+e+"-button").addClass(o+"-state-active")}function p(e){i.find(".fc-"+e+"-button").removeClass(o+"-state-active")}function d(e){i.find(".fc-"+e+"-button").attr("disabled","disabled").addClass(o+"-state-disabled")}function v(e){i.find(".fc-"+e+"-button").removeAttr("disabled").removeClass(o+"-state-disabled")}function m(){return s}var r=this;r.render=u,r.destroy=f,r.updateTitle=c,r.activateButton=h,r.deactivateButton=p,r.disableButton=d,r.enableButton=v,r.getViewsWithButtons=m;var i=e(),s=[],o}function m(t){function b(e,t){return!l||e.clone().stripZone()<l.clone().stripZone()||t.clone().stripZone()>c.clone().stripZone()}function w(e,t){l=e,c=t,y=[];var n=++h,r=f.length;p=r;for(var i=0;i<r;i++)E(f[i],n)}function E(t,n){S(t,function(r){var i=e.isArray(t.events),o,u;if(n==h){if(r)for(o=0;o<r.length;o++)u=r[o],i||(u=I(u,t)),u&&y.push(u);p--,p||s(y)}})}function S(r,i){var s,o=u.sourceFetchers,a;for(s=0;s<o.length;s++){a=o[s].call(n,r,l.clone(),c.clone(),t.timezone,i);if(a===!0)return;if(typeof a=="object"){S(a,i);return}}var f=r.events;if(f)e.isFunction(f)?(H(),f.call(n,l.clone(),c.clone(),t.timezone,function(e){i(e),F()})):e.isArray(f)?i(f):i();else{var h=r.url;if(h){var p=r.success,v=r.error,m=r.complete,g;e.isFunction(r.data)?g=r.data():g=r.data;var y=e.extend({},g||{}),b=j(r.startParam,t.startParam),w=j(r.endParam,t.endParam),E=j(r.timezoneParam,t.timezoneParam);b&&(y[b]=l.format()),w&&(y[w]=c.format()),t.timezone&&t.timezone!="local"&&(y[E]=t.timezone),H(),e.ajax(e.extend({},d,r,{data:y,success:function(t){t=t||[];var n=B(p,this,arguments);e.isArray(n)&&(t=n),i(t)},error:function(){B(v,this,arguments),i()},complete:function(){B(m,this,arguments),F()}}))}else i()}}function x(e){var t=T(e);t&&(f.push(t),p++,E(t,h))}function T(t){var r=u.sourceNormalizers,i,s;e.isFunction(t)||e.isArray(t)?i={events:t}:typeof t=="string"?i={url:t}:typeof t=="object"&&(i=e.extend({},t));if(i){i.className?typeof i.className=="string"&&(i.className=i.className.split(/\s+/)):i.className=[],e.isArray(i.events)&&(i.origArray=i.events,i.events=e.map(i.events,function(e){return I(e,i)}));for(s=0;s<r.length;s++)r[s].call(n,i);return i}}function N(t){f=e.grep(f,function(e){return!C(e,t)}),y=e.grep(y,function(e){return!C(e.source,t)}),s(y)}function C(e,t){return e&&t&&k(e)==k(t)}function k(e){return(typeof e=="object"?e.origArray||e.url||e.events:null)||e}function L(e){e.start=n.moment(e.start),e.end&&(e.end=n.moment(e.end)),q(e),O(e),s(y)}function O(e){var t,n,r,i;for(t=0;t<y.length;t++){n=y[t];if(n._id==e._id&&n!==e)for(r=0;r<A.length;r++)i=A[r],e[i]!==undefined&&(n[i]=e[i])}}function _(e,t){var n=I(e);n&&(n.source||(t&&(a.events.push(n),n.source=a),y.push(n)),s(y))}function D(t){var n,r;t==null?t=function(){return!0}:e.isFunction(t)||(n=t+"",t=function(e){return e._id==n}),y=e.grep(y,t,!0);for(r=0;r<f.length;r++)e.isArray(f[r].events)&&(f[r].events=e.grep(f[r].events,t,!0));s(y)}function P(t){return e.isFunction(t)?e.grep(y,t):t!=null?(t+="",e.grep(y,function(e){return e._id==t})):y}function H(){m++||r("loading",null,!0,i())}function F(){--m||r("loading",null,!1,i())}function I(r,i){var s={},u,a,f,l;t.eventDataTransform&&(r=t.eventDataTransform(r)),i&&i.eventDataTransform&&(r=i.eventDataTransform(r)),u=n.moment(r.start||r.date);if(!u.isValid())return;a=null;if(r.end){a=n.moment(r.end);if(!a.isValid())return}return f=r.allDay,f===undefined&&(l=j(i?i.allDayDefault:undefined,t.allDayDefault),l!==undefined?f=l:f=!u.hasTime()&&(!a||!a.hasTime())),f?(u.hasTime()&&u.stripTime(),a&&a.hasTime()&&a.stripTime()):(u.hasTime()||(u=n.rezoneDate(u)),a&&!a.hasTime()&&(a=n.rezoneDate(a))),e.extend(s,r),i&&(s.source=i),s._id=r._id||(r.id===undefined?"_fc"+v++:r.id+""),r.className?typeof r.className=="string"?s.className=r.className.split(/\s+/):s.className=r.className:s.className=[],s.allDay=f,s.start=u,s.end=a,t.forceEventDuration&&!s.end&&(s.end=o(s)),g(s),s}function q(e,t,r){var i=e._allDay,s=e._start,o=e._end,u=!1,a,f,l,c;return!t&&!r&&(t=e.start,r=e.end),e.allDay!=i?a=e.allDay:a=!(t||r).hasTime(),a&&(t&&(t=t.clone().stripTime()),r&&(r=r.clone().stripTime())),t&&(a?f=M(t,s.clone().stripTime()):f=M(t,s)),a!=i?u=!0:r&&(l=M(r||n.getDefaultEventEnd(a,t||s),t||s).subtract(M(o||n.getDefaultEventEnd(i,s),s))),c=R(P(e._id),u,a,f,l),{dateDelta:f,durationDelta:l,undo:c}}function R(r,i,s,o,u){var a=n.getIsAmbigTimezone(),f=[];return e.each(r,function(e,r){var l=r._allDay,c=r._start,h=r._end,p=s!=null?s:l,d=c.clone(),v=!i&&h?h.clone():null;p?(d.stripTime(),v&&v.stripTime()):(d.hasTime()||(d=n.rezoneDate(d)),v&&!v.hasTime()&&(v=n.rezoneDate(v))),!v&&(t.forceEventDuration||+u)&&(v=n.getDefaultEventEnd(p,d)),d.add(o),v&&v.add(o).add(u),a&&(+o||+u)&&(d.stripZone(),v&&v.stripZone()),r.allDay=p,r.start=d,r.end=v,g(r),f.push(function(){r.allDay=l,r.start=c,r.end=h,g(r)})}),function(){for(var e=0;e<f.length;e++)f[e]()}}var n=this;n.isFetchNeeded=b,n.fetchEvents=w,n.addEventSource=x,n.removeEventSource=N,n.updateEvent=L,n.renderEvent=_,n.removeEvents=D,n.clientEvents=P,n.mutateEvent=q;var r=n.trigger,i=n.getView,s=n.reportEvents,o=n.getEventEnd,a={events:[]},f=[a],l,c,h=0,p=0,m=0,y=[];e.each((t.events?[t.events]:[]).concat(t.eventSources||[]),function(e,t){var n=T(t);n&&f.push(n)});var A=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"]}function g(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}function y(e,t){t.left&&e.css({"border-left-width":1,"margin-left":t.left-1}),t.right&&e.css({"border-right-width":1,"margin-right":t.right-1})}function b(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function w(t,n,r){var i=Math.floor(n/t.length),s=Math.floor(n-i*(t.length-1)),o=[],u=[],a=[],f=0;E(t),t.each(function(n,r){var l=n===t.length-1?s:i,c=e(r).outerHeight(!0);c<l?(o.push(r),u.push(c),a.push(e(r).height())):f+=c}),r&&(n-=f,i=Math.floor(n/o.length),s=Math.floor(n-i*(o.length-1))),e(o).each(function(t,n){var r=t===o.length-1?s:i,f=u[t],l=a[t],c=r-(f-l);f<r&&e(n).height(c)})}function E(e){e.height("")}function S(t){var n=0;return t.find("> *").each(function(t,r){var i=e(r).outerWidth();i>n&&(n=i)}),n++,t.width(n),n}function x(e,t){return e.height(t).addClass("fc-scroller"),e[0].scrollHeight-1>e[0].clientHeight?!0:(T(e),!1)}function T(e){e.height("").removeClass("fc-scroller")}function N(t){var n=t.css("position"),r=t.parents().filter(function(){var t=e(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!r.length?e(t[0].ownerDocument||document):r}function C(e){var t=e.offset().left,n=t+e.width(),r=e.children(),i=r.offset().left,s=i+r.outerWidth();return{left:i-t,right:n-s}}function k(e){return e.which==1&&!e.ctrlKey}function L(e,t,n,r){var i,s,o,u;if(t>n&&e<r)return e>=n?(i=e.clone(),o=!0):(i=n.clone(),o=!1),t<=r?(s=t.clone(),u=!0):(s=r.clone(),u=!1),{start:i,end:s,isStart:o,isEnd:u}}function A(e,t){e=e||{};if(e[t]!==undefined)return e[t];var n=t.split(/(?=[A-Z])/),r=n.length-1,i;for(;r>=0;r--){i=e[n[r].toLowerCase()];if(i!==undefined)return i}return e["default"]}function M(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:e.time()-n.time()})}function _(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function D(e,t){return e-t}function P(e){var t=function(){};return t.prototype=e,new t}function H(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function B(t,n,r){e.isFunction(t)&&(t=[t]);if(t){var i,s;for(i=0;i<t.length;i++)s=t[i].apply(n,r)||s;return s}}function j(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e]}function F(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function I(e){return e.replace(/&.*?;/g,"")}function q(e){return e.charAt(0).toUpperCase()+e.slice(1)}function R(e,t){var n,r,i,s,o=function(){var u=+(new Date)-s;u<t&&u>0?n=setTimeout(o,t-u):(n=null,e.apply(i,r),n||(i=r=null))};return function(){i=this,r=arguments,s=+(new Date),n||(n=setTimeout(o,t))}}function W(n,r,i){var s=n[0],o=n.length==1&&typeof s=="string",u,a,f,l;if(t.isMoment(s))l=t.apply(null,n),s._ambigTime&&(l._ambigTime=!0),s._ambigZone&&(l._ambigZone=!0);else if(_(s)||s===undefined)l=t.apply(null,n);else{u=!1,a=!1;if(o){if(U.test(s))s+="-01",n=[s],u=!0,a=!0;else if(f=z.exec(s))u=!f[5],a=!0}else e.isArray(s)&&(a=!0);r?l=t.utc.apply(t,n):l=t.apply(null,n),u?(l._ambigTime=!0,l._ambigZone=!0):i&&(a?l._ambigZone=!0:o&&l.zone(s))}return new X(l)}function X(e){H(this,e)}function V(e,t){var n=[],r=!1,i=!1,s;for(s=0;s<e.length;s++)n.push(u.moment.parseZone(e[s])),r=r||n[s]._ambigTime,i=i||n[s]._ambigZone;for(s=0;s<n.length;s++)r&&!t?n[s].stripTime():i&&n[s].stripZone();return n}function $(e,n){return t.fn.format.call(e,n)}function J(e,t){return K(e,rt(t))}function K(e,t){var n="",r;for(r=0;r<t.length;r++)n+=G(e,t[r]);return n}function G(e,t){var n,r;if(typeof t=="string")return t;if(n=t.token)return Q[n]?Q[n](e):$(e,n);if(t.maybe){r=K(e,t.maybe);if(r.match(/[1-9]/))return r}return""}function Y(e,t,n,r,i){var s;return e=u.moment.parseZone(e),t=u.moment.parseZone(t),s=(e.localeData||e.lang).call(e),n=s.longDateFormat(n)||n,r=r||" - ",Z(e,t,rt(n),r,i)}function Z(e,t,n,r,i){var s,o,u="",a,f="",l,c="",h="",p="";for(o=0;o<n.length;o++){s=tt(e,t,n[o]);if(s===!1)break;u+=s}for(a=n.length-1;a>o;a--){s=tt(e,t,n[a]);if(s===!1)break;f=s+f}for(l=o;l<=a;l++)c+=G(e,n[l]),h+=G(t,n[l]);if(c||h)i?p=h+r+c:p=c+r+h;return u+p+f}function tt(e,t,n){var r,i;if(typeof n=="string")return n;if(r=n.token){i=et[r.charAt(0)];if(i&&e.isSame(t,i))return $(e,r)}return!1}function rt(e){return e in nt?nt[e]:nt[e]=it(e)}function it(e){var t=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g,r;while(r=n.exec(e))r[1]?t.push(r[1]):r[2]?t.push({maybe:it(r[2])}):r[3]?t.push({token:r[3]}):r[5]&&t.push(r[5]);return t}function st(e){this.options=e||{}}function ot(e){this.grid=e}function ut(e){this.coordMaps=e}function at(e,t){this.coordMap=e,this.options=t||{}}function ft(e,t){return!e&&!t?!0:e&&t?e.grid===t.grid&&e.row===t.row&&e.col===t.col:!1}function lt(t,n){this.options=n=n||{},this.sourceEl=t,this.parentEl=n.parentEl?e(n.parentEl):t.parent()}function ct(e){this.view=e}function ht(e){ct.call(this,e),this.coordMap=new ot(this)}function pt(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||(e.event.title||"").localeCompare(t.event.title)}function dt(e){ht.call(this,e)}function vt(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];if(r.leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0}return!1}function mt(e,t){return e.leftCol-t.leftCol}function gt(e){ht.call(this,e)}function yt(e){var t,n,r;e.sort(pt),t=bt(e),wt(t);if(n=t[0]){for(r=0;r<n.length;r++)Et(n[r]);for(r=0;r<n.length;r++)St(n[r],0,0)}}function bt(e){var t=[],n,r,i;for(n=0;n<e.length;n++){r=e[n];for(i=0;i<t.length;i++)if(!xt(r,t[i]).length)break;r.level=i,(t[i]||(t[i]=[])).push(r)}return t}function wt(e){var t,n,r,i,s;for(t=0;t<e.length;t++){n=e[t];for(r=0;r<n.length;r++){i=n[r],i.forwardSegs=[];for(s=t+1;s<e.length;s++)xt(i,e[s],i.forwardSegs)}}}function Et(e){var t=e.forwardSegs,n=0,r,i;if(e.forwardPressure===undefined){for(r=0;r<t.length;r++)i=t[r],Et(i),n=Math.max(n,1+i.forwardPressure);e.forwardPressure=n}}function St(e,t,n){var r=e.forwardSegs,i;if(e.forwardCoord===undefined){r.length?(r.sort(Nt),St(r[0],t+1,n),e.forwardCoord=r[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1);for(i=0;i<r.length;i++)St(r[i],0,e.forwardCoord)}}function xt(e,t,n){n=n||[];for(var r=0;r<t.length;r++)Tt(e,t[r])&&n.push(t[r]);return n}function Tt(e,t){return e.bottom>t.top&&e.top<t.bottom}function Nt(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||pt(e,t)}function Ct(n){function u(t){var n=s[t];return e.isPlainObject(n)&&!c(t)?A(n,r.name):n}function a(e,t){return n.trigger.apply(n,[e,t||r].concat(Array.prototype.slice.call(arguments,2),[r]))}function f(e){var t=e.source||{};return j(e.startEditable,t.startEditable,u("eventStartEditable"),e.editable,t.editable,u("editable"))}function l(e){var t=e.source||{};return j(e.durationEditable,t.durationEditable,u("eventDurationEditable"),e.editable,t.editable,u("editable"))}function h(e,t,r,s){var o=n.mutateEvent(t,r,null);a("eventDrop",e,t,o.dateDelta,function(){o.undo(),i()},s,{}),i()}function p(e,t,r,s){var o=n.mutateEvent(t,null,r);a("eventResize",e,t,o.durationDelta,function(){o.undo(),i()},s,{}),i()}function w(e){return t.isMoment(e)&&(e=e.day()),v[e]}function E(){return m}function S(e,t,n){var r=e.clone();t=t||1;while(v[(r.day()+(n?t:0)+7)%7])r.add(t,"days");return r}function x(){var e=T.apply(null,arguments),t=N(e),n=C(t);return n}function T(e,t){var n=r.colCnt,i=b?-1:1,s=b?n-1:0;typeof e=="object"&&(t=e.col,e=e.row);var o=e*n+(t*i+s);return o}function N(e){var t=r.start.day();return e+=g[t],Math.floor(e/m)*7+y[(e%m+m)%m]-t}function C(e){return r.start.clone().add(e,"days")}function k(e){var t=L(e),n=O(t),r=M(n);return r}function L(e){return e.clone().stripTime().diff(r.start,"days")}function O(e){var t=r.start.day();return e+=t,Math.floor(e/7)*m+g[(e%7+7)%7]-g[t]}function M(e){var t=r.colCnt,n=b?-1:1,i=b?t-1:0,s=Math.floor(e/t),o=(e%t+t)%t*n+i;return{row:s,col:o}}function _(e,t){var n=r.rowCnt,i=r.colCnt,s=[],o=D(e,t),u=L(o.start),a=L(o.end),f=O(u),l=O(a)-1;for(var c=0;c<n;c++){var h=c*i,p=h+i-1,d=Math.max(f,h),v=Math.min(l,p);if(d<=v){var m=M(d),g=M(v),y=[m.col,g.col].sort(),b=N(d)==u,w=N(v)+1==a;s.push({row:c,leftCol:y[0],rightCol:y[1],isStart:b,isEnd:w})}}return s}function D(e,t){var n=e.clone().stripTime(),r,i;t&&(r=t.clone().stripTime(),i=+t.time(),i&&i>=o&&r.add(1,"days"));if(!t||r<=n)r=n.clone().add(1,"days");return{start:n,end:r}}function P(e){var t=D(e.start,e.end);return t.end.diff(t.start,"days")>1}var r=this;r.calendar=n,r.opt=u,r.trigger=a,r.isEventDraggable=f,r.isEventResizable=l,r.eventDrop=h,r.eventResize=p;var i=n.reportEventChange,s=n.options,o=t.duration(s.nextDayThreshold);r.init(),r.getEventTimeText=function(e,t){var r,i;return typeof e=="object"&&typeof t=="object"?(r=e,i=t,t=arguments[2]):(r=e.start,i=e.end),t=t||u("timeFormat"),i&&u("displayEventEnd")?n.formatRange(r,i,t):n.formatDate(r,t)},r.isHiddenDay=w,r.skipHiddenDays=S,r.getCellsPerWeek=E,r.dateToCell=k,r.dateToDayOffset=L,r.dayOffsetToCellOffset=O,r.cellOffsetToCell=M,r.cellToDate=x,r.cellToCellOffset=T,r.cellOffsetToDayOffset=N,r.dayOffsetToDate=C,r.rangeToSegments=_,r.isMultiDayEvent=P;var d=u("hiddenDays")||[],v=[],m,g=[],y=[],b=u("isRTL");(function(){u("weekends")===!1&&d.push(0,6);for(var t=0,n=0;t<7;t++)g[t]=n,v[t]=e.inArray(t,d)!=-1,v[t]||(y[n]=t,n++);m=n;if(!m)throw"invalid hiddenDays"})()}function kt(e){Ct.call(this,e),this.dayGrid=new dt(this),this.coordMap=this.dayGrid.coordMap}function Lt(e){kt.call(this,e)}function At(e){kt.call(this,e)}function Ot(e){kt.call(this,e)}function _t(e,t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function Dt(e,t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}function Pt(e){Ct.call(this,e),this.timeGrid=new gt(this),this.opt("allDaySlot")?(this.dayGrid=new dt(this),this.coordMap=new ut([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function Ht(e){Pt.call(this,e)}function Bt(e){Pt.call(this,e)}var n={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:i,day:"dddd"},timeFormat:{"default":r},displayEventEnd:{month:!1,basicWeek:!1,"default":!0},isRTL:!1,defaultButtonText:{prev:"Prev",next:"Next",prevYear:"Prev year",nextYear:"Next year",today:"Today",month:"Month",week:"Week",day:"Day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},s={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},o={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},u=e.fullCalendar={version:"2.1.1"},a=u.views={};e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1),r=this;return this.each(function(i,s){var o=e(s),u=o.data("fullCalendar"),a;typeof t=="string"?u&&e.isFunction(u[t])&&(a=u[t].apply(u,n),i||(r=a),t==="destroy"&&o.removeData("fullCalendar")):u||(u=new h(o,t),o.data("fullCalendar",u),u.render())}),r},u.langs=s,u.datepickerLang=function(t,n,r){var i=s[t];i||(i=s[t]={}),l(i,{isRTL:r.isRTL,weekNumberTitle:r.weekHeader,titleFormat:{month:r.showMonthAfterYear?"YYYY["+r.yearSuffix+"] MMMM":"MMMM YYYY["+r.yearSuffix+"]"},defaultButtonText:{prev:I(r.prevText),next:I(r.nextText),today:I(r.currentText)}}),e.datepicker&&(e.datepicker.regional[n]=e.datepicker.regional[t]=r,e.datepicker.regional.en=e.datepicker.regional[""],e.datepicker.setDefaults(r))},u.lang=function(e,t){var r;t&&(r=s[e],r||(r=s[e]={}),l(r,t||{})),n.lang=e},u.sourceNormalizers=[],u.sourceFetchers=[];var d={dataType:"json",cache:!1},v=1,O=["sun","mon","tue","wed","thu","fri","sat"];u.applyAll=B;var U=/^\s*\d{4}-\d\d$/,z=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;u.moment=function(){return W(arguments)},u.moment.utc=function(){var e=W(arguments,!0);return e.hasTime()&&e.utc(),e},u.moment.parseZone=function(){return W(arguments,!0,!0)},X.prototype=P(t.fn),X.prototype.clone=function(){return W([this])},X.prototype.time=function(e){if(e==null)return t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});delete this._ambigTime,!t.isDuration(e)&&!t.isMoment(e)&&(e=t.duration(e));var n=0;return t.isDuration(e)&&(n=Math.floor(e.asDays())*24),this.hours(n+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())},X.prototype.stripTime=function(){var e=this.toArray();return t.fn.utc.call(this),this.year(e[0]).month(e[1]).date(e[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this._ambigTime=!0,this._ambigZone=!0,this},X.prototype.hasTime=function(){return!this._ambigTime},X.prototype.stripZone=function(){var e=this.toArray(),n=this._ambigTime;return t.fn.utc.call(this),this.year(e[0]).month(e[1]).date(e[2]).hours(e[3]).minutes(e[4]).seconds(e[5]).milliseconds(e[6]),n&&(this._ambigTime=!0),this._ambigZone=!0,this},X.prototype.hasZone=function(){return!this._ambigZone},X.prototype.zone=function(e){return e!=null&&(delete this._ambigTime,delete this._ambigZone),t.fn.zone.apply(this,arguments)},X.prototype.local=function(){var e=this.toArray(),n=this._ambigZone;return delete this._ambigTime,delete this._ambigZone,t.fn.local.apply(this,arguments),n&&this.year(e[0]).month(e[1]).date(e[2]).hours(e[3]).minutes(e[4]).seconds(e[5]).milliseconds(e[6]),this},X.prototype.utc=function(){return delete this._ambigTime,delete this._ambigZone,t.fn.utc.apply(this,arguments)},X.prototype.format=function(){return arguments[0]?J(this,arguments[0]):this._ambigTime?$(this,"YYYY-MM-DD"):this._ambigZone?$(this,"YYYY-MM-DD[T]HH:mm:ss"):$(this)},X.prototype.toISOString=function(){return this._ambigTime?$(this,"YYYY-MM-DD"):this._ambigZone?$(this,"YYYY-MM-DD[T]HH:mm:ss"):t.fn.toISOString.apply(this,arguments)},X.prototype.isWithin=function(e,t){var n=V([this,e,t]);return n[0]>=n[1]&&n[0]<n[2]},X.prototype.isSame=function(e,n){var r;return n?(r=V([this,e],!0),t.fn.isSame.call(r[0],r[1],n)):(e=u.moment.parseZone(e),t.fn.isSame.call(this,e)&&Boolean(this._ambigTime)===Boolean(e._ambigTime)&&Boolean(this._ambigZone)===Boolean(e._ambigZone))},e.each(["isBefore","isAfter"],function(e,n){X.prototype[n]=function(e,r){var i=V([this,e]);return t.fn[n].call(i[0],i[1],r)}});var Q={t:function(e){return $(e,"a").charAt(0)},T:function(e){return $(e,"A").charAt(0)}};u.formatRange=Y;var et={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},nt={};st.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var t=this,n=this.options;this.el=e('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),n.autoHide&&e(document).on("mousedown",this.documentMousedownProxy=e.proxy(this,"documentMousedown"))},documentMousedown:function(t){this.el&&!e(t.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),e(document).off("mousedown",this.documentMousedownProxy)},position:function(){var t=this.options,n=this.el.offsetParent().offset(),r=this.el.outerWidth(),i=this.el.outerHeight(),s=e(window),o=N(this.el),u,a,f,l,c;l=t.top||0,t.left!==undefined?c=t.left:t.right!==undefined?c=t.right-r:c=0,o.is(window)||o.is(document)?(o=s,u=0,a=0):(f=o.offset(),u=f.top,a=f.left),u+=s.scrollTop(),a+=s.scrollLeft(),t.viewportConstrain!==!1&&(l=Math.min(l,u+o.outerHeight()-i-this.margin),l=Math.max(l,u+this.margin),c=Math.min(c,a+o.outerWidth()-r-this.margin),c=Math.max(c,a+this.margin)),this.el.css({top:l-n.top,left:c-n.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}},ot.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]),this.computeBounds()},getCell:function(e,t){var n=null,r=this.rows,i=this.cols,s=-1,o=-1,u;if(this.inBounds(e,t)){for(u=0;u<r.length;u++)if(t>=r[u][0]&&t<r[u][1]){s=u;break}for(u=0;u<i.length;u++)if(e>=i[u][0]&&e<i[u][1]){o=u;break}s>=0&&o>=0&&(n={row:s,col:o},n.grid=this.grid,n.date=this.grid.getCellDate(n))}return n},computeBounds:function(){var e;this.containerEl&&(e=this.containerEl.offset(),this.minX=e.left,this.maxX=e.left+this.containerEl.outerWidth(),this.minY=e.top,this.maxY=e.top+this.containerEl.outerHeight())},inBounds:function(e,t){return this.containerEl?e>=this.minX&&e<this.maxX&&t>=this.minY&&t<this.maxY:!0}},ut.prototype={coordMaps:null,build:function(){var e=this.coordMaps,t;for(t=0;t<e.length;t++)e[t].build()},getCell:function(e,t){var n=this.coordMaps,r=null,i;for(i=0;i<n.length&&!r;i++)r=n[i].getCell(e,t);return r}},at.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(e){k(e)&&(e.preventDefault(),this.startListening(e),this.options.distance||this.startDrag(e))},startListening:function(t){var n,r;this.isListening||(t&&this.options.scroll&&(n=N(e(t.target)),!n.is(window)&&!n.is(document)&&(this.scrollEl=n,this.scrollHandlerProxy=R(e.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),t&&(r=this.getCell(t),this.origCell=r,this.origDate=r?r.date:null,this.mouseX0=t.pageX,this.mouseY0=t.pageY),e(document).on("mousemove",this.mousemoveProxy=e.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=e.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",t))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(e){var t,n;this.isDragging||(t=this.options.distance||1,n=Math.pow(e.pageX-this.mouseX0,2)+Math.pow(e.pageY-this.mouseY0,2),n>=t*t&&this.startDrag(e)),this.isDragging&&this.drag(e)},startDrag:function(e){var t;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",e),t=this.getCell(e),t&&this.cellOver(t,!0))},drag:function(e){var t;this.isDragging&&(t=this.getCell(e),ft(t,this.cell)||(this.cell&&this.cellOut(),t&&this.cellOver(t)),this.dragScroll(e))},cellOver:function(e){this.cell=e,this.date=e.date,this.trigger("cellOver",e,e.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(e){this.stopDrag(e),this.stopListening(e)},stopDrag:function(e){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",e),this.isDragging=!1)},stopListening:function(t){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),e(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",t),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(e){return this.coordMap.getCell(e.pageX,e.pageY)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(e){e.preventDefault()},computeScrollBounds:function(){var e=this.scrollEl,t;e&&(t=e.offset(),this.scrollBounds={top:t.top,left:t.left,bottom:t.top+e.outerHeight(),right:t.left+e.outerWidth()})},dragScroll:function(e){var t=this.scrollSensitivity,n=this.scrollBounds,r,i,s,o,u=0,a=0;n&&(r=(t-(e.pageY-n.top))/t,i=(t-(n.bottom-e.pageY))/t,s=(t-(e.pageX-n.left))/t,o=(t-(n.right-e.pageX))/t,r>=0&&r<=1?u=r*this.scrollSpeed*-1:i>=0&&i<=1&&(u=i*this.scrollSpeed),s>=0&&s<=1?a=s*this.scrollSpeed*-1:o>=0&&o<=1&&(a=o*this.scrollSpeed)),this.setScrollVel(u,a)},setScrollVel:function(t,n){this.scrollTopVel=t,this.scrollLeftVel=n,this.constrainScrollVel(),(this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId&&(this.scrollIntervalId=setInterval(e.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;this.scrollTopVel<0?e.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?e.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel&&this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}},lt.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(t){this.isFollowing||(this.isFollowing=!0,this.mouseY0=t.pageY,this.mouseX0=t.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),e(document).on("mousemove",this.mousemoveProxy=e.proxy(this,"mousemove")))},stop:function(t,n){function s(){this.isAnimating=!1,r.destroyEl(),this.top0=this.left0=null,n&&n()}var r=this,i=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,e(document).off("mousemove",this.mousemoveProxy),t&&i&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:i,complete:s})):s())},getEl:function(){var e=this.el;return e||(this.sourceEl.width(),e=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),e},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),this.top0===null&&(this.sourceEl.width(),e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(e){this.topDelta=e.pageY-this.mouseY0,this.leftDelta=e.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}},ct.prototype={view:null,cellHtml:"<td/>",rowHtml:function(e,t){var n=this.view,r=this.getHtmlRenderer("cell",e),i="",s,o;t=t||0;for(s=0;s<n.colCnt;s++)o=n.cellToDate(t,s),i+=r(t,s,o);return i=this.bookendCells(i,e,t),"<tr>"+i+"</tr>"},bookendCells:function(e,t,n){var r=this.view,i=this.getHtmlRenderer("intro",t)(n||0),s=this.getHtmlRenderer("outro",t)(n||0),o=r.opt("isRTL"),u=o?s:i,a=o?i:s;return typeof e=="string"?u+e+a:e.prepend(u).append(a)},getHtmlRenderer:function(e,t){var n=this.view,r,i,s,o;r=e+"Html",t&&(i=t+q(e)+"Html");if(i&&(o=n[i]))s=n;else if(i&&(o=this[i]))s=this;else if(o=n[r])s=n;else if(o=this[r])s=this;return typeof o=="function"?function(e){return o.apply(s,arguments)||""}:function(){return o||""}}},ht.prototype=P(ct.prototype),e.extend(ht.prototype,{el:null,coordMap:null,cellDuration:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(e,t){},getCellDate:function(e){},getCellDayEl:function(e){},rangeToSegs:function(e,t){},bindHandlers:function(){var t=this;this.el.on("mousedown",function(n){!e(n.target).is(".fc-event-container *, .fc-more")&&!e(n.target).closest(".fc-popover").length&&t.dayMousedown(n)}),this.bindSegHandlers()},dayMousedown:function(e){var t=this,n=this.view,r=n.opt("selectable"),i=null,s,o,u,a=new at(this.coordMap,{scroll:n.opt("dragScroll"),dragStart:function(){n.unselect()},cellOver:function(e,n){a.origDate&&(u=t.getCellDayEl(e),i=[n,a.origDate].sort(D),s=i[0],o=i[1].clone().add(t.cellDuration),r&&t.renderSelection(s,o))},cellOut:function(e,n){i=null,t.destroySelection()},listenStop:function(e){i&&(i[0].isSame(i[1])&&n.trigger("dayClick",u[0],s,e),r&&n.reportSelection(s,o,e))}});a.mousedown(e)},renderDrag:function(e,t,n){},destroyDrag:function(){},renderResize:function(e,t,n){},destroyResize:function(){},renderRangeHelper:function(e,t,n){var r=this.view,i;!t&&r.opt("forceEventDuration")&&(t=r.calendar.getDefaultEventEnd(!e.hasTime(),e)),i=n?P(n.event):{},i.start=e,i.end=t,i.allDay=!(e.hasTime()||t&&t.hasTime()),i.className=(i.className||[]).concat("fc-helper"),n||(i.editable=!1),this.renderHelper(i,n)},renderHelper:function(e,t){},destroyHelper:function(){},renderSelection:function(e,t){this.renderHighlight(e,t)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(e,t){},destroyHighlight:function(){},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.rowHtml("head")+"</thead>"+"</table>"+"</div>"},headCellHtml:function(e,t,n){var r=this.view,i=r.calendar,s=r.opt("columnFormat");return'<th class="fc-day-header '+r.widgetHeaderClass+" fc-"+O[n.day()]+'">'+F(i.formatDate(n,s))+"</th>"},bgCellHtml:function(e,t,n){var r=this.view,i=this.getDayClasses(n);return i.unshift("fc-day",r.widgetContentClass),'<td class="'+i.join(" ")+'" data-date="'+n.format()+'"></td>'},getDayClasses:function(e){var t=this.view,n=t.calendar.getNow().stripTime(),r=["fc-"+O[e.day()]];return t.name==="month"&&e.month()!=t.intervalStart.month()&&r.push("fc-other-month"),e.isSame(n,"day")?r.push("fc-today",t.highlightStateClass):e<n?r.push("fc-past"):r.push("fc-future"),r}}),e.extend(ht.prototype,{mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,renderEvents:function(e){},getSegs:function(){},destroyEvents:function(){this.triggerSegMouseout()},renderSegs:function(t,n){var r=this.view,i="",s=[],o;for(o=0;o<t.length;o++)i+=this.renderSegHtml(t[o],n);return e(i).each(function(n,i){var o=t[n],u=r.resolveEventEl(o.event,e(i));u&&(u.data("fc-seg",o),o.el=u,s.push(o))}),s},renderSegHtml:function(e,t){},eventsToSegs:function(t,n,r){var i=this;return e.map(t,function(e){return i.eventToSegs(e,n,r)})},eventToSegs:function(e,t,n){var r=e.start.clone().stripZone(),i=this.view.calendar.getEventEnd(e).stripZone(),s,o,u;t&&n?(u=L(r,i,t,n),s=u?[u]:[]):s=this.rangeToSegs(r,i);for(o=0;o<s.length;o++)u=s[o],u.event=e,u.eventStartMS=+r,u.eventDurationMS=i-r;return s},bindSegHandlers:function(){var t=this,n=this.view;e.each({mouseenter:function(e,n){t.triggerSegMouseover(e,n)},mouseleave:function(e,n){t.triggerSegMouseout(e,n)},click:function(e,t){return n.trigger("eventClick",this,e.event,t)},mousedown:function(r,i){e(i.target).is(".fc-resizer")&&n.isEventResizable(r.event)?t.segResizeMousedown(r,i):n.isEventDraggable(r.event)&&t.segDragMousedown(r,i)}},function(n,r){t.el.on(n,".fc-event-container > *",function(n){var i=e(this).data("fc-seg");if(i&&!t.isDraggingSeg&&!t.isResizingSeg)return r.call(this,i,n)})})},triggerSegMouseover:function(e,t){this.mousedOverSeg||(this.mousedOverSeg=e,this.view.trigger("eventMouseover",e.el[0],e.event,t))},triggerSegMouseout:function(e,t){t=t||{},this.mousedOverSeg&&(e=e||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",e.el[0],e.event,t))},segDragMousedown:function(e,t){var n=this,r=this.view,i=e.el,s=e.event,o,u,a=new lt(e.el,{parentEl:r.el,opacity:r.opt("dragOpacity"),revertDuration:r.opt("dragRevertDuration"),zIndex:2}),f=new at(r.coordMap,{distance:5,scroll:r.opt("dragScroll"),listenStart:function(e){a.hide(),a.start(e)},dragStart:function(t){n.triggerSegMouseout(e,t),n.isDraggingSeg=!0,r.hideEvent(s),r.trigger("eventDragStart",i[0],s,t,{})},cellOver:function(t,i){var s=e.cellDate||f.origDate,l=n.computeDraggedEventDates(e,s,i);o=l.start,u=l.end,r.renderDrag(o,u,e)?a.hide():a.show()},cellOut:function(){o=null,r.destroyDrag(),a.show()},dragStop:function(e){var t=o&&!o.isSame(s.start);a.stop(!t,function(){n.isDraggingSeg=!1,r.destroyDrag(),r.showEvent(s),r.trigger("eventDragStop",i[0],s,e,{}),t&&r.eventDrop(i[0],s,o,e)})},listenStop:function(){a.stop()}});f.mousedown(t)},computeDraggedEventDates:function(e,t,n){var r=this.view,i=e.event,s=i.start,o=r.calendar.getEventEnd(i),u,a,f;return n.hasTime()===t.hasTime()?(u=M(n,t),a=s.clone().add(u),i.end===null?f=null:f=o.clone().add(u)):(a=n,f=null),{start:a,end:f}},segResizeMousedown:function(e,t){function l(){n.destroyResize(),r.showEvent(s)}var n=this,r=this.view,i=e.el,s=e.event,o=s.start,u=r.calendar.getEventEnd(s),a=null,f;f=new at(this.coordMap,{distance:5,scroll:r.opt("dragScroll"),dragStart:function(t){n.triggerSegMouseout(e,t),n.isResizingSeg=!0,r.trigger("eventResizeStart",i[0],s,t,{})},cellOver:function(t,i){i.isBefore(o)&&(i=o),a=i.clone().add(n.cellDuration),a.isSame(u)?(a=null,l()):(n.renderResize(o,a,e),r.hideEvent(s))},cellOut:function(){a=null,l()},dragStop:function(e){n.isResizingSeg=!1,l(),r.trigger("eventResizeStop",i[0],s,e,{}),a&&r.eventResize(i[0],s,a,e)}}),f.mousedown(t)},getSegClasses:function(e,t,n){var r=e.event,i=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(r.className,r.source?r.source.className:[]);return t&&i.push("fc-draggable"),n&&i.push("fc-resizable"),i},getEventSkinCss:function(e){var t=this.view,n=e.source||{},r=e.color,i=n.color,s=t.opt("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t.opt("eventBackgroundColor")||s,u=e.borderColor||r||n.borderColor||i||t.opt("eventBorderColor")||s,a=e.textColor||n.textColor||t.opt("eventTextColor"),f=[];return o&&f.push("background-color:"+o),u&&f.push("border-color:"+u),a&&f.push("color:"+a),f.join(";")}}),dt.prototype=P(ht.prototype),e.extend(dt.prototype,{numbersVisible:!1,cellDuration:t.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,highlightEls:null,render:function(t){var n=this.view,r="",i;for(i=0;i<n.rowCnt;i++)r+=this.dayRowHtml(i,t);this.el.html(r),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),this.dayEls.each(function(t,r){var i=n.cellToDate(Math.floor(t/n.colCnt),t%n.colCnt);n.trigger("dayRender",null,i,e(r))}),ht.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(e,t){var n=this.view,r=["fc-row","fc-week",n.widgetContentClass];return t&&r.push("fc-rigid"),'<div class="'+r.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.rowHtml("day",e)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.rowHtml("number",e)+"</thead>":"")+"</table>"+"</div>"+"</div>"},dayCellHtml:function(e,t,n){return this.bgCellHtml(e,t,n)},buildCoords:function(t,n){var r=this.view.colCnt,i,s,o;this.dayEls.slice(0,r).each(function(t,r){i=e(r),s=i.offset().left,t&&(o[1]=s),o=[s],n[t]=o}),o[1]=s+i.outerWidth(),this.rowEls.each(function(n,r){i=e(r),s=i.offset().top,n&&(o[1]=s),o=[s],t[n]=o}),o[1]=s+i.outerHeight()+this.bottomCoordPadding},getCellDate:function(e){return this.view.cellToDate(e)},getCellDayEl:function(e){return this.dayEls.eq(e.row*this.view.colCnt+e.col)},rangeToSegs:function(e,t){return this.view.rangeToSegments(e,t)},renderDrag:function(e,t,n){var r;this.renderHighlight(e,t||this.view.calendar.getDefaultEventEnd(!0,e));if(n&&!n.el.closest(this.el).length)return this.renderRangeHelper(e,t,n),r=this.view.opt("dragOpacity"),r!==undefined&&this.helperEls.css("opacity",r),!0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderResize:function(e,t,n){this.renderHighlight(e,t),this.renderRangeHelper(e,t,n)},destroyResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(t,n){var r=[],i=this.renderEventRows([t]);this.rowEls.each(function(t,s){var o=e(s),u=e('<div class="fc-helper-skeleton"><table/></div>'),a;n&&n.row===t?a=n.el.position().top:a=o.find(".fc-content-skeleton tbody").position().top,u.css("top",a).find("table").append(i[t].tbodyEl),o.append(u),r.push(u[0])}),this.helperEls=e(r)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},renderHighlight:function(t,n){var r=this.rangeToSegs(t,n),i=[],s,o,u;for(s=0;s<r.length;s++)o=r[s],u=e(this.highlightSkeletonHtml(o.leftCol,o.rightCol+1)),u.appendTo(this.rowEls[o.row]),i.push(u[0]);this.highlightEls=e(i)},destroyHighlight:function(){this.highlightEls&&(this.highlightEls.remove(),this.highlightEls=null)},highlightSkeletonHtml:function(e,t){var n=this.view.colCnt,r="";return e>0&&(r+='<td colspan="'+e+'"/>'),t>e&&(r+='<td colspan="'+(t-e)+'" class="fc-highlight" />'),n>t&&(r+='<td colspan="'+(n-t)+'"/>'),r=this.bookendCells(r,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+r+"</tr>"+"</table>"+"</div>"}}),e.extend(dt.prototype,{segs:null,rowStructs:null,renderEvents:function(t){var n=this.rowStructs=this.renderEventRows(t),r=[];this.rowEls.each(function(t,i){e(i).find(".fc-content-skeleton > table").append(n[t].tbodyEl),r.push.apply(r,n[t].segs)}),this.segs=r},getSegs:function(){return(this.segs||[]).concat(this.popoverSegs||[])},destroyEvents:function(){var e,t;ht.prototype.destroyEvents.call(this),e=this.rowStructs||[];while(t=e.pop())t.tbodyEl.remove();this.segs=null,this.destroySegPopover()},renderEventRows:function(e){var t=this.eventsToSegs(e),n=[],r,i;t=this.renderSegs(t),r=this.groupSegRows(t);for(i=0;i<r.length;i++)n.push(this.renderEventRow(i,r[i]));return n},renderSegHtml:function(e,t){var n=this.view,r=n.opt("isRTL"),i=e.event,s=n.isEventDraggable(i),o=!t&&i.allDay&&e.isEnd&&n.isEventResizable(i),u=this.getSegClasses(e,s,o),a=this.getEventSkinCss(i),f="",l;return u.unshift("fc-day-grid-event"),!i.allDay&&e.isStart&&(f='<span class="fc-time">'+F(n.getEventTimeText(i))+"</span>"),l='<span class="fc-title">'+(F(i.title||"")||"&nbsp;")+"</span>",'<a class="'+u.join(" ")+'"'+(i.url?' href="'+F(i.url)+'"':"")+(a?' style="'+a+'"':"")+">"+'<div class="fc-content">'+(r?l+" "+f:f+" "+l)+"</div>"+(o?'<div class="fc-resizer"/>':"")+"</a>"},renderEventRow:function(t,n){function y(t){while(p<t)g=(l[c-1]||[])[p],g?g.attr("rowspan",parseInt(g.attr("rowspan")||1,10)+1):(g=e("<td/>"),d.append(g)),f[c][p]=g,l[c][p]=g,p++}var r=this.view,i=r.colCnt,s=this.buildSegLevels(n),o=Math.max(1,s.length),u=e("<tbody/>"),a=[],f=[],l=[],c,h,p,d,v,m,g;for(c=0;c<o;c++){h=s[c],p=0,d=e("<tr/>"),a.push([]),f.push([]),l.push([]);if(h)for(v=0;v<h.length;v++){m=h[v],y(m.leftCol),g=e('<td class="fc-event-container"/>').append(m.el),m.leftCol!=m.rightCol?g.attr("colspan",m.rightCol-m.leftCol+1):l[c][p]=g;while(p<=m.rightCol)f[c][p]=g,a[c][p]=m,p++;d.append(g)}y(i),this.bookendCells(d,"eventSkeleton"),u.append(d)}return{row:t,tbodyEl:u,cellMatrix:f,segMatrix:a,segLevels:s,segs:n}},buildSegLevels:function(e){var t=[],n,r,i;e.sort(pt);for(n=0;n<e.length;n++){r=e[n];for(i=0;i<t.length;i++)if(!vt(r,t[i]))break;r.level=i,(t[i]||(t[i]=[])).push(r)}for(i=0;i<t.length;i++)t[i].sort(mt);return t},groupSegRows:function(e){var t=this.view,n=[],r;for(r=0;r<t.rowCnt;r++)n.push([]);for(r=0;r<e.length;r++)n[e[r].row].push(e[r]);return n}}),e.extend(dt.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var t=this.rowStructs||[],n,r;for(n=0;n<t.length;n++)this.unlimitRow(n),e?typeof e=="number"?r=e:r=this.computeRowLevelLimit(n):r=!1,r!==!1&&this.limitRow(n,r)},computeRowLevelLimit:function(e){var t=this.rowEls.eq(e),n=t.height(),r=this.rowStructs[e].tbodyEl.children(),i,s;for(i=0;i<r.length;i++){s=r.eq(i).removeClass("fc-limited");if(s.position().top+s.outerHeight()>n)return i}return!1},limitRow:function(t,n){function T(i){while(u<i)a={row:t,col:u},d=r.getCellSegs(a,n),d.length&&(g=l[n-1][u],x=r.renderMoreLink(a,d),S=e("<div/>").append(x),g.append(S),o.push(S[0])),u++}var r=this,i=this.view,s=this.rowStructs[t],o=[],u=0,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;if(n&&n<s.segLevels.length){f=s.segLevels[n-1],l=s.cellMatrix,c=s.tbodyEl.children().slice(n).addClass("fc-limited").get();for(h=0;h<f.length;h++){p=f[h],T(p.leftCol),m=[],v=0;while(u<=p.rightCol)a={row:t,col:u},d=this.getCellSegs(a,n),m.push(d),v+=d.length,u++;if(v){g=l[n-1][p.leftCol],y=g.attr("rowspan")||1,b=[];for(w=0;w<m.length;w++)E=e('<td class="fc-more-cell"/>').attr("rowspan",y),d=m[w],a={row:t,col:p.leftCol+w},x=this.renderMoreLink(a,[p].concat(d)),S=e("<div/>").append(x),E.append(S),b.push(E[0]),o.push(E[0]);g.addClass("fc-limited").after(e(b)),c.push(g[0])}}T(i.colCnt),s.moreEls=e(o),s.limitedEls=e(c)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(t,n){var r=this,i=this.view;return e('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(s){var o=i.opt("eventLimitClick"),u=i.cellToDate(t),a=e(this),f=r.getCellDayEl(t),l=r.getCellSegs(t),c=r.resliceDaySegs(l,u),h=r.resliceDaySegs(n,u);typeof o=="function"&&(o=i.trigger("eventLimitClick",null,{date:u,dayEl:f,moreEl:a,segs:c,hiddenSegs:h},s)),o==="popover"?r.showSegPopover(u,t,a,c):typeof o=="string"&&i.calendar.zoomTo(u,o)})},showSegPopover:function(e,t,n,r){var i=this,s=this.view,o=n.parent(),u,a;s.rowCnt==1?u=this.view.el:u=this.rowEls.eq(t.row),a={className:"fc-more-popover",content:this.renderSegPopoverContent(e,r),parentEl:this.el,top:u.offset().top,autoHide:!0,viewportConstrain:s.opt("popoverViewportConstrain"),hide:function(){i.segPopover.destroy(),i.segPopover=null,i.popoverSegs=null}},s.opt("isRTL")?a.right=o.offset().left+o.outerWidth()+1:a.left=o.offset().left-1,this.segPopover=new st(a),this.segPopover.show()},renderSegPopoverContent:function(t,n){var r=this.view,i=r.opt("theme"),s=t.format(r.opt("dayPopoverFormat")),o=e('<div class="fc-header '+r.widgetHeaderClass+'">'+'<span class="fc-close '+(i?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span>'+'<span class="fc-title">'+F(s)+"</span>"+'<div class="fc-clear"/>'+"</div>"+'<div class="fc-body '+r.widgetContentClass+'">'+'<div class="fc-event-container"></div>'+"</div>"),u=o.find(".fc-event-container"),a;n=this.renderSegs(n,!0),this.popoverSegs=n;for(a=0;a<n.length;a++)n[a].cellDate=t,u.append(n[a].el);return o},resliceDaySegs:function(t,n){var r=e.map(t,function(e){return e.event}),i=n.clone().stripTime(),s=i.clone().add(1,"days");return this.eventsToSegs(r,i,s)},getMoreLinkText:function(e){var t=this.view,n=t.opt("eventLimitText");return typeof n=="function"?n(e):"+"+e+" "+n},getCellSegs:function(e,t){var n=this.rowStructs[e.row].segMatrix,r=t||0,i=[],s;while(r<n.length)s=n[r][e.col],s&&i.push(s),r++;return i}}),gt.prototype=P(ht.prototype),e.extend(gt.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,highlightEl:null,helperEl:null,render:function(){this.processOptions(),this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),ht.prototype.render.call(this)},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.slatRowHtml()+"</table>"+"</div>"},slotBgCellHtml:function(e,t,n){return this.bgCellHtml(e,t,n)},slatRowHtml:function(){var e=this.view,n=e.calendar,r=e.opt("isRTL"),i="",s=this.slotDuration.asMinutes()%15===0,o=t.duration(+this.minTime),u,a,f;while(o<this.maxTime)u=e.start.clone().time(o),a=u.minutes(),f='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(!s||!a?"<span>"+F(n.formatDate(u,e.opt("axisFormat")))+"</span>":"")+"</td>",i+="<tr "+(a?'class="fc-minor"':"")+">"+(r?"":f)+'<td class="'+e.widgetContentClass+'"/>'+(r?f:"")+"</tr>",o.add(this.slotDuration);return i},processOptions:function(){var e=this.view,n=e.opt("slotDuration"),r=e.opt("snapDuration");n=t.duration(n),r=r?t.duration(r):n,this.slotDuration=n,this.snapDuration=r,this.cellDuration=r,this.minTime=t.duration(e.opt("minTime")),this.maxTime=t.duration(e.opt("maxTime"))},rangeToSegs:function(e,t){var n=this.view,r=[],i,s,o,u,a;e=e.clone().stripZone(),t=t.clone().stripZone();for(s=0;s<n.colCnt;s++)o=n.cellToDate(0,s),u=o.clone().time(this.minTime),a=o.clone().time(this.maxTime),i=L(e,t,u,a),i&&(i.col=s,r.push(i));return r},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},buildCoords:function(n,r){var i=this.view.colCnt,s=this.el.offset().top,o=t.duration(+this.minTime),u=null,a,f;this.dayEls.slice(0,i).each(function(t,n){a=e(n),f=a.offset().left,u&&(u[1]=f),u=[f],r[t]=u}),u[1]=f+a.outerWidth(),u=null;while(o<this.maxTime)f=s+this.computeTimeTop(o),u&&(u[1]=f),u=[f],n.push(u),o.add(this.snapDuration);u[1]=s+this.computeTimeTop(o)},getCellDate:function(e){var t=this.view,n=t.calendar;return n.rezoneDate(t.cellToDate(0,e.col).time(this.minTime+this.snapDuration*e.row))},getCellDayEl:function(e){return this.dayEls.eq(e.col)},computeDateTop:function(e,n){return this.computeTimeTop(t.duration(e.clone().stripZone()-n.clone().stripTime()))},computeTimeTop:function(e){var t=(e-this.minTime)/this.slotDuration,n,r,i,s;return t=Math.max(0,t),t=Math.min(this.slatEls.length,t),n=Math.floor(t),r=t-n,i=this.slatTops[n],r?(s=this.slatTops[n+1],i+(s-i)*r):i},computeSlatTops:function(){var t=[],n;this.slatEls.each(function(r,i){n=e(i).position().top,t.push(n)}),t.push(n+this.slatEls.last().outerHeight()),this.slatTops=t},renderDrag:function(e,t,n){var r;if(n)return this.renderRangeHelper(e,t,n),r=this.view.opt("dragOpacity"),r!==undefined&&this.helperEl.css("opacity",r),!0;this.renderHighlight(e,t||this.view.calendar.getDefaultEventEnd(!1,e))},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderResize:function(e,t,n){this.renderRangeHelper(e,t,n)},destroyResize:function(){this.destroyHelper()},renderHelper:function(t,n){var r=this.renderEventTable([t]),i=r.tableEl,s=r.segs,o,u,a;for(o=0;o<s.length;o++)u=s[o],n&&n.col===u.col&&(a=n.el,u.el.css({left:a.css("left"),right:a.css("right"),"margin-left":a.css("margin-left"),"margin-right":a.css("margin-right")}));this.helperEl=e('<div class="fc-helper-skeleton"/>').append(i).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(e,t){this.view.opt("selectHelper")?this.renderRangeHelper(e,t):this.renderHighlight(e,t)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderHighlight:function(t,n){this.highlightEl=e(this.highlightSkeletonHtml(t,n)).appendTo(this.el)},destroyHighlight:function(){this.highlightEl&&(this.highlightEl.remove(),this.highlightEl=null)},highlightSkeletonHtml:function(e,t){var n=this.view,r=this.rangeToSegs(e,t),i="",s=0,o,u,a,f,l;for(o=0;o<r.length;o++)u=r[o],s<u.col&&(i+='<td colspan="'+(u.col-s)+'"/>',s=u.col),a=n.cellToDate(0,s),f=this.computeDateTop(u.start,a),l=this.computeDateTop(u.end,a),i+='<td><div class="fc-highlight-container"><div class="fc-highlight" style="top:'+f+"px;bottom:-"+l+'px"/>'+"</div>"+"</td>",s++;return s<n.colCnt&&(i+='<td colspan="'+(n.colCnt-s)+'"/>'),i=this.bookendCells(i,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+i+"</tr>"+"</table>"+"</div>"}}),e.extend(gt.prototype,{segs:null,eventSkeletonEl:null,renderEvents:function(t){var n=this.renderEventTable(t);this.eventSkeletonEl=e('<div class="fc-content-skeleton"/>').append(n.tableEl),this.el.append(this.eventSkeletonEl),this.segs=n.segs},getSegs:function(){return this.segs||[]},destroyEvents:function(){ht.prototype.destroyEvents.call(this),this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null),this.segs=null},renderEventTable:function(t){var n=e("<table><tr/></table>"),r=n.find("tr"),i=this.eventsToSegs(t),s,o,u,a,f,l;i=this.renderSegs(i),s=this.groupSegCols(i),this.computeSegVerticals(i);for(a=0;a<s.length;a++){f=s[a],yt(f),l=e('<div class="fc-event-container"/>');for(o=0;o<f.length;o++)u=f[o],u.el.css(this.generateSegPositionCss(u)),u.bottom-u.top<30&&u.el.addClass("fc-short"),l.append(u.el);r.append(e("<td/>").append(l))}return this.bookendCells(r,"eventSkeleton"),{tableEl:n,segs:i}},updateSegVerticals:function(){var e=this.segs,t;if(e){this.computeSegVerticals(e);for(t=0;t<e.length;t++)e[t].el.css(this.generateSegVerticalCss(e[t]))}},computeSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},renderSegHtml:function(e,t){var n=this.view,r=e.event,i=n.isEventDraggable(r),s=!t&&e.isEnd&&n.isEventResizable(r),o=this.getSegClasses(e,i,s),u=this.getEventSkinCss(r),a,f,l;o.unshift("fc-time-grid-event");if(n.isMultiDayEvent(r)){if(e.isStart||e.isEnd)a=n.getEventTimeText(e.start,e.end),f=n.getEventTimeText(e.start,e.end,"LT"),l=n.getEventTimeText(e.start,null)}else a=n.getEventTimeText(r),f=n.getEventTimeText(r,"LT"),l=n.getEventTimeText(r.start,null);return'<a class="'+o.join(" ")+'"'+(r.url?' href="'+F(r.url)+'"':"")+(u?' style="'+u+'"':"")+">"+'<div class="fc-content">'+(a?'<div class="fc-time" data-start="'+F(l)+'"'+' data-full="'+F(f)+'"'+">"+"<span>"+F(a)+"</span>"+"</div>":"")+(r.title?'<div class="fc-title">'+F(r.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(s?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(e){var t=this.view,n=t.opt("isRTL"),r=t.opt("slotEventOverlap"),i=e.backwardCoord,s=e.forwardCoord,o=this.generateSegVerticalCss(e),u,a;return r&&(s=Math.min(1,i+(s-i)*2)),n?(u=1-s,a=i):(u=i,a=1-s),o.zIndex=e.level+1,o.left=u*100+"%",o.right=a*100+"%",r&&e.forwardPressure&&(o[n?"marginLeft":"marginRight"]=20),o},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},groupSegCols:function(e){var t=this.view,n=[],r;for(r=0;r<t.colCnt;r++)n.push([]);for(r=0;r<e.length;r++)n[e[r].col].push(e[r]);return n}}),Ct.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight",this.documentMousedownProxy=e.proxy(this,"documentMousedown"),this.documentDragStartProxy=e.proxy(this,"documentDragStart")},render:function(){this.updateSize(),this.trigger("viewRender",this,this,this.el),e(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect(),this.trigger("viewDestroy",this,this,this.el),this.destroyEvents(),this.el.empty(),e(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(e,t){},updateSize:function(e){e&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var e=this.calendar;this.setHeight(e.getSuggestedViewHeight(),e.isHeightAuto())},setHeight:function(e,t){},computeScrollerHeight:function(e){var t=this.el.add(this.scrollerEl),n;return t.css({position:"relative",left:-1}),n=this.el.outerHeight()-this.scrollerEl.height(),t.css({position:"",left:""}),e-n},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){this.scrollTop!==null&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(e){this.segEach(function(e){this.trigger("eventAfterRender",e.event,e.event,e.el)}),this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(e){this.trigger("eventDestroy",e.event,e.event,e.el)})},resolveEventEl:function(t,n){var r=this.trigger("eventRender",t,t,n);return r===!1?n=null:r&&r!==!0&&(n=e(r)),n},showEvent:function(e){this.segEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.segEach(function(e){e.el.css("visibility","hidden")},e)},segEach:function(e,t){var n=this.getSegs(),r;for(r=0;r<n.length;r++)(!t||n[r].event._id===t._id)&&e.call(this,n[r])},getSegs:function(){},renderDrag:function(e,t,n){},destroyDrag:function(){},documentDragStart:function(t,n){var r=this,i=null,s;this.opt("droppable")&&(s=new at(this.coordMap,{cellOver:function(e,t){i=t,r.renderDrag(t)},cellOut:function(){i=null,r.destroyDrag()}}),e(document).one("dragstop",function(e,t){r.destroyDrag(),i&&r.trigger("drop",e.target,i,e,t)}),s.startDrag(t))},select:function(e,t,n){this.unselect(n),this.renderSelection(e,t),this.reportSelection(e,t,n)},renderSelection:function(e,t){},reportSelection:function(e,t,n){this.isSelected=!0,this.trigger("select",null,e,t,n)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,e))},destroySelection:function(){},documentMousedown:function(t){var n;this.isSelected&&this.opt("unselectAuto")&&k(t)&&(n=this.opt("unselectCancel"),(!n||!e(t.target).closest(n).length)&&this.unselect(t))}},kt.prototype=P(Ct.prototype),e.extend(kt.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(e,t,n){this.rowCnt=e,this.colCnt=t,this.dayNumbersVisible=n,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows()),Ct.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy(),Ct.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+'<td class="'+this.widgetContentClass+'">'+'<div class="fc-day-grid-container">'+'<div class="fc-day-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+">"+"<span>"+F(this.opt("weekNumberTitle"))+"</span>"+"</th>"},numberIntroHtml:function(e){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+">"+"<span>"+this.calendar.calculateWeekNumber(this.cellToDate(e,0))+"</span>"+"</td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(e,t,n){var r;return this.dayNumbersVisible?(r=this.dayGrid.getDayClasses(n),r.unshift("fc-day-number"),'<td class="'+r.join(" ")+'" data-date="'+n.format()+'">'+n.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return this.weekNumberWidth!==null?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&typeof e!="number"},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=S(this.el.find(".fc-week-number")))},setHeight:function(e,t){var n=this.opt("eventLimit"),r;T(this.scrollerEl),b(this.headRowEl),this.dayGrid.destroySegPopover(),n&&typeof n=="number"&&this.dayGrid.limitRows(n),r=this.computeScrollerHeight(e),this.setGridHeight(r,t),n&&typeof n!="number"&&this.dayGrid.limitRows(n),!t&&x(this.scrollerEl,r)&&(y(this.headRowEl,C(this.scrollerEl)),r=this.computeScrollerHeight(e),this.scrollerEl.height(r),this.restoreScroll())},setGridHeight:function(e,t){t?E(this.dayGrid.rowEls):w(this.dayGrid.rowEls,e,!0)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight(),Ct.prototype.renderEvents.call(this,e)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){Ct.prototype.destroyEvents.call(this),this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(e,t,n){return this.dayGrid.renderDrag(e,t,n)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(e,t){this.dayGrid.renderSelection(e,t)},destroySelection:function(){this.dayGrid.destroySelection()}}),f({fixedWeekCount:!0}),a.month=Lt,Lt.prototype=P(kt.prototype),e.extend(Lt.prototype,{name:"month",incrementDate:function(e,t){return e.clone().stripTime().add(t,"months").startOf("month")},render:function(e){var t;this.intervalStart=e.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add(1,"months"),this.start=this.intervalStart.clone(),this.start=this.skipHiddenDays(this.start),this.start.startOf("week"),this.start=this.skipHiddenDays(this.start),this.end=this.intervalEnd.clone(),this.end=this.skipHiddenDays(this.end,-1,!0),this.end.add((7-this.end.weekday())%7,"days"),this.end=this.skipHiddenDays(this.end,-1,!0),t=Math.ceil(this.end.diff(this.start,"weeks",!0)),this.isFixedWeeks()&&(this.end.add(6-t,"weeks"),t=6),this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat")),kt.prototype.render.call(this,t,this.getCellsPerWeek(),!0)},setGridHeight:function(e,t){t=t||this.opt("weekMode")==="variable",t&&(e*=this.rowCnt/6),w(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){var e=this.opt("weekMode");return e?e==="fixed":this.opt("fixedWeekCount")}}),a.basicWeek=At,At.prototype=P(kt.prototype),e.extend(At.prototype,{name:"basicWeek",incrementDate:function(e,t){return e.clone().stripTime().add(t,"weeks").startOf("week")},render:function(e){this.intervalStart=e.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),kt.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}}),a.basicDay=Ot,Ot.prototype=P(kt.prototype),e.extend(Ot.prototype,{name:"basicDay",incrementDate:function(e,t){var n=e.clone().stripTime().add(t,"days");return n=this.skipHiddenDays(n,t<0?-1:1),n},render:function(e){this.start=this.intervalStart=e.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),kt.prototype.render.call(this,1,1,!1)}}),f({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:_t,timeFormat:{agenda:Dt},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});var Mt=5;Pt.prototype=P(Ct.prototype),e.extend(Pt.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(t){this.rowCnt=1,this.colCnt=t,this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=e('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)"),Ct.prototype.render.call(this),this.resetScroll()},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),Ct.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+'<td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container">'+'<div class="fc-time-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){var e,t,n,r;return this.opt("weekNumbers")?(e=this.cellToDate(0,0),t=this.calendar.calculateWeekNumber(e),n=this.opt("weekNumberTitle"),this.opt("isRTL")?r=t+n:r=n+t,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+">"+"<span>"+F(r)+"</span>"+"</th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+">"+"<span>"+(this.opt("allDayHtml")||F(this.opt("allDayText")))+"</span>"+"</td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return this.axisWidth!==null?'style="width:'+this.axisWidth+'px"':""},updateSize:function(e){e&&this.timeGrid.resize(),Ct.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=S(this.el.find(".fc-axis"))},setHeight:function(e,t){var n,r;this.bottomRuleHeight===null&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),T(this.scrollerEl),b(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),n=this.opt("eventLimit"),n&&typeof n!="number"&&(n=Mt),n&&this.dayGrid.limitRows(n)),t||(r=this.computeScrollerHeight(e),x(this.scrollerEl,r)?(y(this.noScrollRowEls,C(this.scrollerEl)),r=this.computeScrollerHeight(e),this.scrollerEl.height(r),this.restoreScroll()):(this.scrollerEl.height(r).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){function i(){e.scrollerEl.scrollTop(r)}var e=this,n=t.duration(this.opt("scrollTime")),r=this.timeGrid.computeTimeTop(n);r=Math.ceil(r),r&&r++,i(),setTimeout(i,0)},renderEvents:function(e){var t=[],n=[],r=[],i,s;for(s=0;s<e.length;s++)e[s].allDay?t.push(e[s]):n.push(e[s]);i=this.timeGrid.renderEvents(n),this.dayGrid&&(r=this.dayGrid.renderEvents(t)),this.updateHeight(),Ct.prototype.renderEvents.call(this,e)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){Ct.prototype.destroyEvents.call(this),this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(e,t,n){if(e.hasTime())return this.timeGrid.renderDrag(e,t,n);if(this.dayGrid)return this.dayGrid.renderDrag(e,t,n)},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(e,t){e.hasTime()||t.hasTime()?this.timeGrid.renderSelection(e,t):this.dayGrid&&this.dayGrid.renderSelection(e,t)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),a.agendaWeek=Ht,Ht.prototype=P(Pt.prototype),e.extend(Ht.prototype,{name:"agendaWeek",incrementDate:function(e,t){return e.clone().stripTime().add(t,"weeks").startOf("week")},render:function(e){this.intervalStart=e.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),Pt.prototype.render.call(this,this.getCellsPerWeek())}}),a.agendaDay=Bt,Bt.prototype=P(Pt.prototype),e.extend(Bt.prototype,{name:"agendaDay",incrementDate:function(e,t){var n=e.clone().stripTime().add(t,"days");return n=this.skipHiddenDays(n,t<0?-1:1),n},render:function(e){this.start=this.intervalStart=e.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),Pt.prototype.render.call(this,1)}})});