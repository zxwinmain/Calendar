define(["i18n!nls/locale","component","text!templet/signinView.html"],function(e,t,n){app.views.signin=Backbone.View.extend({el:"#workspace",initialize:function(){$("#component_head").remove(),$("#component_window").remove(),t.load_requested_param("locale")&&localStorage.getItem("locale")!=t.load_requested_param("locale")&&(localStorage.setItem("locale",t.load_requested_param("locale")),location.reload())},events:{"keyup input[name=USER_PASSWORD]":"onKeyPressed","click #signin_button":"onSigninClicked"},onKeyPressed:function(e){e.keyCode==13&&this.$("#signin_button").click()},onSigninClicked:function(n){n&&n.preventDefault();var r=$("input[name=USER_EMAIL]").val(),i=$("input[name=USER_PASSWORD]").val(),s=1;!r||!i?(s=0,t.alert({TITLE:e.root.dialog.title_error,MESSAGE:e.root.dialog.signin_required,BUTTON_TRUE_TITLE:e.root.dialog.button_true})):t.isEmail(r)?t.isPassword(i)||(s=0,t.alert({TITLE:e.root.dialog.title_error,MESSAGE:e.root.dialog.signin_invalid_password,BUTTON_TRUE_TITLE:e.root.dialog.button_true})):(s=0,t.alert({TITLE:e.root.dialog.title_error,MESSAGE:e.root.dialog.signin_invalid_email,BUTTON_TRUE_TITLE:e.root.dialog.button_true})),s&&$("form").submit()},render:function(){return this.template=_.template(n),this.$el.html(this.template()),window.appError&&(window.appError=="WRONG_USER_OR_PASSWORD"?t.alert({TITLE:e.root.dialog.title_error,MESSAGE:e.root.dialog.signin_wrong_user_or_password,BUTTON_TRUE_TITLE:e.root.dialog.button_true}):window.appError=="WRONG_ACCOUNT"&&t.alert({TITLE:e.root.dialog.title_error,MESSAGE:e.root.dialog.signin_wrong_account,BUTTON_TRUE_TITLE:e.root.dialog.button_true})),this}})});