define(["i18n!nls/locale","component","text!templet/component_headView.html","model/userModel","view/component_window_settingsView"],function(e,t,n){app.views.component_head=Backbone.View.extend({el:"body",events:{"click #component_head ul.head a":"windowSettingsClicked"},windowSettingsClicked:function(e){e&&e.preventDefault(),t.component_window(null),(new app.views.component_window_settings).render()},render:function(e){var t=function(){e&&($("#component_head ul.menu a").removeClass("active"),$("#component_head ul.menu a[href=#"+e+"]").addClass("active"))};return $("#component_head").html()||(app.instances.models.user.unbind(),app.instances.models.user.bind("change",this.renderHead),this.template=_.template(n),this.$el.prepend(this.template({USER_NAME:app.instances.models.user.get("name"),USER_EMAIL:app.instances.models.user.get("email"),USER_AVATAR:app.instances.models.user.get("avatar")})),t()),e&&t(),this},renderHead:function(){var e=$("#component_head ul.head a");e.find("img").attr("src",app.instances.models.user.get("avatar")),e.find("strong").html(app.instances.models.user.get("name")+"<span>"+app.instances.models.user.get("email")+"</span>")}})});